(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{3720:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1138).v)(e=>({artUrl:null,prompt:"",setArt:(t,a)=>e({artUrl:t,prompt:a}),clearArt:()=>e({artUrl:null,prompt:""})}))},4481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(5155),n=a(8581),i=a(2115),s=a(63),l=a(3720),o=a(5001),c=a(258),u=a(7215),d=a(4157),h=a(273);function m(){let e=(0,i.useRef)(null),[t]=(0,i.useState)(()=>{let e=new Float32Array(1500);for(let t=0;t<1500;t++)e[t]=(Math.random()-.5)*8;return e});return(0,o.D)((t,a)=>{e.current.rotation.y+=.05*a,e.current.rotation.x+=.02*a}),(0,r.jsx)("group",{rotation:[0,0,Math.PI/4],children:(0,r.jsx)(u.ON,{ref:e,positions:t,stride:3,children:(0,r.jsx)(d.q,{transparent:!0,color:"#ffffff",size:.04,sizeAttenuation:!0,depthWrite:!1})})})}function p(e){let{onComplete:t}=e;return(0,r.jsxs)(h.P.div,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center w-full h-full max-w-md mx-auto text-white bg-black",initial:{opacity:1},animate:{opacity:[1,1,0]},transition:{duration:1,delay:3},onAnimationComplete:t,children:[(0,r.jsx)(c.Hl,{camera:{position:[0,0,5]},children:(0,r.jsx)(m,{})}),(0,r.jsx)(h.P.div,{className:"absolute text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1},children:(0,r.jsx)("p",{className:"mb-6 text-2xl font-light",children:"\uD83C\uDF19 꿈을 해석하고 있어요..."})}),(0,r.jsx)(h.P.div,{className:"absolute border-2 rounded-full border-purple-400/40",initial:{scale:.8,opacity:.8},animate:{scale:[.8,1.4,.8],opacity:[.8,.2,.8]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},style:{width:"220px",height:"220px"}})]})}function x(){let[e,t]=(0,i.useState)(!1),[a,o]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(""),m=(0,s.useRouter)(),x=async()=>{if(!a.trim())return void h("꿈 내용을 입력해주세요");u(!0),h("");try{let e=await fetch("https://api.mymemory.translated.net/get?q=".concat(encodeURIComponent(a),"&langpair=ko|en"));if(!e.ok)throw Error("번역 실패");let t=(await e.json()).responseData.translatedText,r=encodeURIComponent(t+" like ghibli style art"),n="https://image.pollinations.ai/prompt/".concat(r,"?t=").concat(Date.now());await new Promise((e,t)=>{let a=new Image;a.onload=e,a.onerror=t,a.src=n}),l.A.getState().setArt(n,a)}catch(e){h("아트 생성에 실패했어요. 다시 시도해주세요."),u(!1),console.error("Generation error:",e)}};return(0,i.useEffect)(()=>{let e=setTimeout(()=>t(!0),10);return()=>clearTimeout(e)},[]),(0,r.jsx)("div",{className:"relative flex flex-col items-center justify-between h-full transition-opacity duration-2000 ".concat(e?"opacity-100":"opacity-0"),children:c?(0,r.jsx)(p,{onComplete:()=>m.push("/dream/result")}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{text:"✍️ \xa0 오늘 당신의 꿈을 기록해주세요"}),(0,r.jsxs)("div",{className:"relative w-full h-2/5",children:[(0,r.jsx)("textarea",{className:"w-full h-full p-4 text-white border rounded-md resize-none bg-white/10 border-white/30 placeholder-white/80 focus:outline-none",placeholder:"여기에 당신의 꿈을 기록해보세요...",name:"dream-text-area",value:a,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&x()}}),d&&(0,r.jsx)("p",{className:"mt-2 text-sm text-red-400",children:d})]}),(0,r.jsx)("button",{className:"p-3 transition duration-200 rounded-sm cursor-pointer mb-15 bg-white/10 \n            hover:bg-black/20 hover:shadow-inner focus:bg-black/20 active:bg-black/20\n            disabled:opacity-50 disabled:cursor-not-allowed",onClick:x,disabled:!a.trim(),children:(0,r.jsx)("span",{className:"text-lg",children:"[ 아트 생성하기 → ]"})})]})})}},8517:(e,t,a)=>{Promise.resolve().then(a.bind(a,4481))},8581:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(5155);function n(e){let{text:t}=e;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("hr",{className:"border-white"}),(0,r.jsx)("p",{className:"py-4 text-lg font-light text-center",children:t}),(0,r.jsx)("hr",{className:"border-white"})]})}}},e=>{e.O(0,[367,831,413,273,66,441,255,358],()=>e(e.s=8517)),_N_E=e.O()}]);